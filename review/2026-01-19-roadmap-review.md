# `.claude/roadmap.md` レビュー（進捗可視化観点）

対象: `.claude/roadmap.md`  
確認日: 2026-01-19

## 結論
大枠は問題ありません。Phase/DoD/Risk Gate/P0/PB以降の見通し・参照先が揃っており、「次に何を満たせば前に進めるか」が読みやすいです。  
一方で、**進捗の信頼性（“DONE”の根拠）**と**参照リンクの整合**の面で、いくつか直すとさらに強くなります。

## 良い点（このまま維持推奨）
- **Phase A→B のゲート（DoD）が明示**されていて、運用開始判断のブレが出にくい
- **Risk Gate を表で固定**しており、停止品質の議論がしやすい
- **P0（完了）/Phase B（未着手）を分離**していて、開発の「今どこ？」が追える
- **参照ドキュメントが列挙**され、設計の一次情報（`.claude/plans/...` / `.claude/specs/...`）へ辿れる

## 修正・改善すると良い点（軽微だが効く）
### 1) タスクIDの重複
`P0-19` が **NonceManager** と **Batching** で重複しています（ロードマップ上の管理が崩れやすい）。  
→ どちらかを `P0-20` 等に振り直すのがおすすめです。

### 2) テスト結果の数値が他ドキュメントとズレる可能性
ロードマップの `cargo test --workspace` が **113 tests** になっていますが、`.claude/specs/2026-01-19-24h-test-bugfix.md` では **130+** と記載があります。  
→ ロードマップ側は「最新の実測」に合わせて更新、もしくは `130+` のように幅で表現すると破綻しにくいです。

### 3) “非交渉ライン（38項目）” が抜粋である旨を明示すると親切
現在の表は一部のみ列挙なので、`（抜粋）` を見出しに入れると誤解が減ります。

### 4) 参照整合（トレーサビリティ）の強化
進捗可視化の目的に対して、ロードマップの上部に以下があると「いつの状態か」が固定できます。
- `対象コミット`（例: `git rev-parse --short HEAD` の値）
- `検証実行日/環境`（手元/CIなど）
- `証跡`（日次出力の置き場所: `data/...` / `logs/...` / Prometheus endpoint など）

## 提案（運用しやすくする最小追加）
- 「**Known Issues / Open Bugs**」セクションを1つ追加して、未解決だけを箇条書き（リンク付き）にする
- DoDの各項目に「**確認方法**」を1行だけ添える（例: 24h稼働＝ログの開始/終了条件、日次指標＝出力ファイル名）

